---

title: Welcome to mahoudata

keywords: fastai
sidebar: home_sidebar

summary: "Library for recommending Mahou-San Miguel beers"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This file provides a brief introduction to the usage of mahoudata library</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install -e .</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">mahoudata.core</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">pandas_profiling</span> <span class="kn">import</span> <span class="n">ProfileReport</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">MinMaxScaler</span>
<span class="kn">from</span> <span class="nn">scipy.spatial.distance</span> <span class="kn">import</span> <span class="n">pdist</span><span class="p">,</span> <span class="n">squareform</span>
<span class="kn">from</span> <span class="nn">pandas_profiling</span> <span class="kn">import</span> <span class="n">ProfileReport</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">nltk</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Read-data">Read data<a class="anchor-link" href="#Read-data">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./data/dataset-datathon.csv&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Explore-using-data-profiling">Explore using data profiling<a class="anchor-link" href="#Explore-using-data-profiling">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">profile</span> <span class="o">=</span> <span class="n">ProfileReport</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Pandas Profiling Report&#39;</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:{</span><span class="s1">&#39;full_width&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}})</span>
<span class="n">profile</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">output_file</span><span class="o">=</span><span class="s2">&quot;./reports/raw_data_profile.html&quot;</span><span class="p">)</span> <span class="c1">#Check reports folder</span>

<span class="c1"># Uncomment the following line for an interactive visualization</span>
<span class="c1">#profile.to_notebook_iframe() ## Explore using data profiling</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Run-Recommender">Run Recommender<a class="anchor-link" href="#Run-Recommender">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First step is to create a context. At the moment it only defines the column names of numeric variables. Further options for the program might be added here.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;numeric_cols&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;lupulo_afrutado_citrico&#39;</span><span class="p">,</span> 
                             <span class="s1">&#39;lupulo_floral_herbal&#39;</span><span class="p">,</span><span class="s1">&#39;amargor&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span> 
                             <span class="s1">&#39;maltoso&#39;</span><span class="p">,</span> <span class="s1">&#39;licoroso&#39;</span><span class="p">,</span> <span class="s1">&#39;afrutado&#39;</span><span class="p">,</span> <span class="s1">&#39;especias&#39;</span><span class="p">,</span><span class="s1">&#39;acidez&#39;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next step is to select the type of recommender we want to run.</p>
<p>For the moment, only <code>numeric</code> type has been partially developed. The <code>numeric</code> strategy computes cosine distances among numeric vectors.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">RecommenderStrategyFactory</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

<span class="n">strategy</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">createStrategy</span><span class="p">(</span><span class="s1">&#39;numeric&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then we can use the <code>model_builder</code> function to prepare data for the recommender algorithm:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datamodel</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">model_builder</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-14-8a70658680c0&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>datamodel <span class="ansi-blue-fg">=</span> strategy<span class="ansi-blue-fg">.</span>model_builder<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/local/github/mahoudata/mahoudata/core.py</span> in <span class="ansi-cyan-fg">model_builder</span><span class="ansi-blue-fg">(self, dataframe)</span>
<span class="ansi-green-intense-fg ansi-bold">     70</span>         preprocessor <span class="ansi-blue-fg">=</span> PreProcess<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>ctx<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     71</span>         df <span class="ansi-blue-fg">=</span> preprocessor<span class="ansi-blue-fg">.</span>cols_munging<span class="ansi-blue-fg">(</span>dataframe<span class="ansi-blue-fg">,</span> fillna <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 72</span><span class="ansi-red-fg">         </span>df <span class="ansi-blue-fg">=</span> preprocessor<span class="ansi-blue-fg">.</span>scale_cols<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     73</span>         <span class="ansi-green-fg">return</span> df
<span class="ansi-green-intense-fg ansi-bold">     74</span> 

<span class="ansi-green-fg">/usr/local/github/mahoudata/mahoudata/core.py</span> in <span class="ansi-cyan-fg">scale_cols</span><span class="ansi-blue-fg">(self, dataframe)</span>
<span class="ansi-green-intense-fg ansi-bold">     37</span>     <span class="ansi-green-fg">def</span> scale_cols<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> dataframe<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     38</span>         <span class="ansi-blue-fg">&#34;Min Max scaler for numeric columns&#34;</span>
<span class="ansi-green-fg">---&gt; 39</span><span class="ansi-red-fg">         </span>scaler <span class="ansi-blue-fg">=</span> MinMaxScaler<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     40</span>         df_scaled = pd.DataFrame(
<span class="ansi-green-intense-fg ansi-bold">     41</span>             scaler<span class="ansi-blue-fg">.</span>fit_transform<span class="ansi-blue-fg">(</span>dataframe<span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>ctx<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;numeric_cols&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span>

<span class="ansi-red-fg">NameError</span>: name &#39;MinMaxScaler&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For executing the recommender algorithm we can run:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">recommender_df</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">exec_strategy</span><span class="p">(</span><span class="n">datamodel</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we explore recommender_df we can see that at this stage, it is a squared symmetric matrix.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">recommender_df</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>
 

