{% extends 'layout.html' %}

{% block content %}
  <div class="steps">
    {% for step in brewing_steps %}
      <section id="{{ step.id|e }}">
        <h1>{{ step.name|e }}</h1>
        <p>{{ step.description|e }}</p>

        {% for attribute in step.attributes %}

          <h2>{{ attribute.name|e }}</h2>

          <div class="attribute__control">
            <canvas id="attribute-{{ attribute.id }}"></canvas>

            <input name="{{ attribute.id }}" 
              type="range" 
              min="{{ attribute.min }}" 
              max="{{ attribute.max }}"
              value="{{ attribute.mean }}"
              step="any" />
          </div>
          
        {% else %}
          {# last step without attributes is always the las one 
            - d3 radar impl container <div id="radar"></div>
          #}          
          <h1 id="recommendation-title"></h1>
          <p id="recommendation-description"></p>
          <canvas id="recommendation-radar"></canvas>
          <button id="guess">Guess</button>
        {% endfor %}

      </section>
    {% endfor %}
  </div>
  <script>
    window.brewingSteps = {{ brewing_steps|tojson|safe }}
  </script>

{% endblock %}